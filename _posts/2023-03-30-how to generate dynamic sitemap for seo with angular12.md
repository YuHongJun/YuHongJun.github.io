---
author: Demi_YuHongJun
comments: true
date: 2023-03-30 05:42:32+00:00
layout: post
title: how to generate dynamic sitemap for seo with angular12?
description: how to generate dynamic sitemap for seo with angular12?
keywords: javascript angular12 sitemap
categories:
- frontend
- javascript
tags:
- javascript
---
* 目录
{:toc}
---

how to generate dynamic sitemap for seo with angular12?

> ![threejs开发特训营作业封面.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dca88cca81814d029daf41ba32259316~tplv-k3u1fbpfcp-watermark.image?)

Generating a dynamic sitemap for SEO with Angular 12 involves a few steps since Angular is a Single Page Application (SPA) framework. This means that the content on the site is generated and updated dynamically with JavaScript, which can make it challenging for search engines to crawl and index the site.

To create a dynamic sitemap for an Angular 12 application, follow these steps:

1. Pre-rendering or Server-side rendering (SSR) with Angular Universal:
   To make your Angular application SEO-friendly, you need to either pre-render or server-render your pages using Angular Universal. This will generate static HTML versions of your pages that can be crawled and indexed by search engines.
   
   To add Angular Universal to your project, run this command in your project directory:
   
   ```
   ng add @nguniversal/express-engine
   ```
   This will set up the necessary configurations and dependencies for server-side rendering.

2. Create a sitemap generator script:
   Create a script that will generate your sitemap.xml file using the URLs from your Angular application. You can use the 'sitemap' package from npm to do this.

   First, install the 'sitemap' package:
   ```
   npm install sitemap
   ```
   Then, create a new file named 'sitemap-generator.js' in your project root directory, and add the following code:
   ```
   const fs = require('fs');
   const { SitemapStream, streamToPromise } = require('sitemap');
   
   const urls = [
     // Add the URLs of your Angular application here
     { url: '/', changefreq: "daily", priority: 1 },
     { url: '/page1', changefreq: "daily", priority: 0.8 },
     { url: '/page2', changefreq: "daily", priority: 0.8 },
    // Add more pages as needed
    ];
    const sitemapStream = new SitemapStream({ hostname: 'https://www.example.com' });
    
    urls.forEach((url) => {
    sitemapStream.write(url);
    });
    
    sitemapStream.end();
    
    streamToPromise(sitemapStream)
    .then((sitemap) => {
    fs.writeFileSync('./dist/YOUR_PROJECT_NAME/browser/sitemap.xml', sitemap);
    console.log('Sitemap generated successfully.');
    })
    .catch((error) => {
    console.error('Error generating sitemap:', error);
    });
    
    Replace 'YOUR_PROJECT_NAME' with your actual project name, and update the 'urls' array and 'hostname' with your application's URLs and domain.
   ```
3. Update your server.ts file:
    Open the 'server.ts' file in your project root directory (generated by Angular Universal) and add the following code to serve the sitemap.xml file:
    
    ```
    app.get('/sitemap.xml', (req, res) => {
      res.sendFile('sitemap.xml', { root: './dist/YOUR_PROJECT_NAME/browser' });
    });
    Replace 'YOUR_PROJECT_NAME' with your actual project name.
    ```
4. Build your application and generate the sitemap:
   Run the following command to build your Angular application and generate the sitemap.xml file:
   ```
   npm run build:ssr && node sitemap-generator.js

   ```
5. Deploy your application:
   Deploy your Angular application with server-side rendering to your server. Make sure your server supports Node.js.

6. Submit your sitemap to search engines:
   Finally, submit your sitemap.xml file to search engines like Google and Bing. You can do this through their respective webmaster tools (Google Search Console and Bing Webmaster Tools).

By following these steps, you can create a dynamic sitemap for your Angular 12 application, making it more SEO-friendly.
